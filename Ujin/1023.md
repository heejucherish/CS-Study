# Operating System

## Process & Thread

1. 운영체제란 ?
   
   * 컴퓨터 시스템의 자원들을 효율적으로 관리하며, 사용자가 컴퓨터를 편리하고 효과적으로 사용할 수 있도록 환경을 제공하는 여러 프로그램의 모임
   * 목적
     * 처리능력 향상, 반환 시간 단축, 사용 가능도 향상, 신뢰도 향상
   * 기능
     * 프로세서, 기억장치, 입출력 장치 등 자원을 관리
     * 자원을 효율적으로 관리하기 위해 자원의 스케줄링 기능 제공
     * 사용자와 시스템 간 인터페이스 제공
     * 시스템의 각종 하드웨어와 네트워크를 관리, 제어
     * 데이터 관리, 데이터 및 자원의 공유 기능 제공
     * 시스템의 오류 검사, 복구
     * 자원 보호 기능 제공
     * 입출력 보조 기능 제공

2. 프로세스와 스레드
   
   * 프로세스 : 컴퓨터에서 연속적으로 실행되고 있는 컴퓨터 프로그램
     * 각각 독립된 메모리 영역 할당
     * 최소 1개의 스레드를 가지고 있음
     * 한 프로세스가 다른 프로세스의 자원에 접근하려면 프로세스 간 통신 필요
   * 스레드 : 프로세스 내에서 실행되는 여러 흐름의 단위
     * stack 영역만 따로 할당 받고 code, data, heap 메모리 영역은 공유
     * 같은 프로세스 내 스레드끼리 자원을 공유하면서 실행

3. 멀티 스레드의 장단점
   
   * 멀티 프로세스 : 하나의 프로그램을 여러 개의 프로세스로 구성해 각 프로세스가 하나의 작업을 처리하도록 하는 것
     * 장점 : 한 프로세스에 문제가 발생해도 다른 프로세스에 영향을 미치지 않음
     * 단점 : 프로세스 간 공유하는 메모리가 없기 때문에 context switching이 발생하면, 데이터를 모두 리셋하고 새로 받아야함
   * 멀티 스레드 : 하나의 프로그램을 여러 개의 스레드로 구성해 각 스레드가 하나의 작업을 처리하도록 하는 것
     * 장점 : 시스템 자원 소모 감소 / 시스템 처리량 증가(처리 비용 감소) / 응답 시간 단축
     * 단점 : 동기화 문제가 발생하므로 주의 깊은 설계가 필요

4. Thread-safe
   
   * 멀티 스레드 프로그래밍에서 일반적으로 어떤 함수나 변수, 객체가 여러 스레드로부터 동시에 접근이 이루어져도 프로그램의 실행에 문제가 없음을 의미
   * 지키기 위한 방법
     * Re-entrancy
       * 어떤 함수가 한 스레드에 의해 실행 중일때, 다른 스레드가 그 함수를 호출하더라도 결과가 맞게 주어져야 함
     * Thread-local storage
       * 공유 자원의 사용을 최대한 줄여서 각 스레드에서만 접근 가능한 저장소를 사용함으로써 동시 접근을 막음
       * 스레드끼리 공유하는 메모리 영역의 자원 접근은 최소화하고, 독립적인 stack 영역의 자원을 사용하도록 설계
     * Immutable objects
       * 공유 자원을 사용한다면, 불변 객체를 사용하라는 것
       * 만약 변경 가능한 객체 사용시, 새로운 객체를 생성 후 공유 자원 객체의 값을 복사해 사용
     * Atomic operations
       * 공유 자원에 접근할 때 원자 연산을 이용하거나, 원자적으로 정의된 접근 방법을 사용 
       * 상호 배제 구현

5. 세마포어 & 뮤텍스    
   
   * 뮤텍스 
     * key에 해당하는 어떤 오브젝트가 있고, 이 오브젝트를 소유한 스레드/프로세스 만 공유자원에 접근 가능
     * 동기화 대상 : 1개
   * 세마포어
     * 공통으로 관리하는 하나의 값을 이용해 최대 허용치만큼만 동시에 스레드/프로세스가 공유자원에 접근 가능
     * 동기화 대상 : 1개 이상

## Scheduling

1. 스케줄링이란 ?
   
   * 한정적인 메모리를 여러 프로세스가 효율적으로 사용할 수 있도록 다음 실행 시간에 실행할 수 있는 프로세스 중 하나를 선택하는 역할
   * 장기 스케줄러 : 디스크와 메모리 사이의 스케줄링 담당
   * 단기 스케줄러 : 메모리와 CPU 사이의 스케줄링 담당
   * 중기 스케줄러 : 여유 공간 마련을 위해 프로세스를 메모리에서 디스크로 보내는 역할

2. 비선점방식 & 선점방식
   
   * 비선점 스케줄링 
     * 프로세스가 CPU를 할당받으면 해당 프로세스가 완료될 때까지 CPU를 사용하는 방식
     * 일괄 처리 방식의 스케줄링
     * 공정하지만, 긴급 응답을 요하는 작업에는 좋지 않음
   * 선점 스케줄링
     * 하나의 프로세스가 CPU를 할당받아 실행하고 있을 때 우선순위가 높은 프로세스가 CPU를 강제로 뺏어 사용할 수 있는 스케줄링 기법
     * 많은 오버헤드 발생
     * 실시간 처리에 유용

3. Context Switching
   
   * 새로운 프로세스에게 CPU를 할당하기 위해 현재 CPU가 할당된 프로세스의 상태 정보를 저장하고, 새로운 프로세스의 상태 정보를 설정한 후 CPU를 할당하여 실행되도록 하는 작업